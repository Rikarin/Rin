func sleep(interval: TimeInterval) [
    if (Task.current !is null) {
        // wait for timer
    } else {
        .stdc.posix.usleep(interval.total!"usecs")
    }
}

task runMe() -> Task!int { // same as func but calling them perform internal __rin_runTask() conversion
    sleep(5.seconds) // Sleep just yield in tasks
    yield
    writeln("test")
    // This will run in another task
}


func main() -> int {
    runMe()
    runMe()
    runMe()
    
    return Task.runLoop()
}
